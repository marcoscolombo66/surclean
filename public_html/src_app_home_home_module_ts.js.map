{"version":3,"file":"src_app_home_home_module_ts.js","mappings":"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","sources":["./src/app/home/home-routing.module.ts","./src/app/home/home.module.ts","./src/app/home/home.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { HomePage } from './home.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: HomePage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class HomePageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule,ReactiveFormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { HomePageRoutingModule } from './home-routing.module';\r\nimport { HttpClientModule } from '@angular/common/http';\r\nimport { HomePage } from './home.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    HomePageRoutingModule,\r\n    HttpClientModule,\r\n    ReactiveFormsModule\r\n  ],\r\n  declarations: [HomePage]\r\n})\r\nexport class HomePageModule {}\r\n","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { IonSlides } from '@ionic/angular';\r\nimport { Router } from '@angular/router';\r\nimport { AppConfig } from 'src/app/config';\r\nimport { HttpClient,HttpHeaders } from '@angular/common/http';\r\nimport { ModalController } from '@ionic/angular';\r\nimport { MasinfoPage } from '../modals/masinfo/masinfo.page';\r\nimport { ResultadosPage } from '../modals/resultados/resultados.page';\r\n\r\n@Component({\r\n  selector: 'app-home',\r\n  templateUrl: './home.page.html',\r\n  styleUrls: ['./home.page.scss'],\r\n})\r\nexport class HomePage implements OnInit {\r\n  @ViewChild('slider') slider: IonSlides;\r\n  mostrarBusqueda: boolean = false; // Declara la propiedad aquí\r\n  mostrarMenu: boolean = true;\r\n  resultadosBusqueda: string[] = []; // Agrega la propiedad para los resultados de búsqueda\r\n  searchText: any;\r\n  urlRoot: string = AppConfig.urlRoot;\r\n  productos: any;\r\n  isSearching: boolean= false;\r\n  pageNumber: number;\r\n  categorias: any;\r\n  categoriasOtros: any;\r\n  constructor(public http: HttpClient,private modalCtrl: ModalController) {\r\n    this.getCategorias();\r\n    \r\n   }    \r\n  \r\n  test(event: any) {\r\n    console.log('Valor seleccionado:', event.detail.value);\r\n  }\r\n\r\n  iniciarBusqueda() {\r\n    this.mostrarBusqueda = !this.mostrarBusqueda;\r\n    console.log('Valor selecc') \r\n  }\r\n\r\n   \r\n\r\n  async modalMasInfo(idProducto,nombreProducto,descripcionProducto,fotoProducto,precioProducto) {\r\n    //const user= await this.inicia.getUser();\r\n    //const url_proyecto = user[0].url_proyecto\r\n    const modal = await this.modalCtrl.create({\r\n      component: MasinfoPage,\r\n      //breakpoints: [0, 0.99],\r\n      //initialBreakpoint: 0.99,\r\n      //handle: true,\r\n      componentProps: {\r\n        mySubject: idProducto,\r\n        mySubject2: nombreProducto,\r\n        mySubject3: descripcionProducto,\r\n        mySubject4: fotoProducto,\r\n        mySubject5: precioProducto,\r\n        url_proyecto: this.urlRoot\r\n      },\r\n      animated: true,\r\n      canDismiss: true,\r\n      keyboardClose: true,\r\n    });\r\n    await modal.present();\r\n  }\r\n  buscarProductos(event: any) {\r\n    this.searchText = event.target.value.trim().toLowerCase();\r\n    \r\n    // Verifica si hay texto de búsqueda\r\n    if (this.searchText) {\r\n      // Desactiva el Infinite Scroll y realiza la búsqueda\r\n      this.isSearching = true;\r\n      this.getProductos(this.searchText);\r\n    } \r\n    else {\r\n      // Si no hay texto de búsqueda, reactiva el Infinite Scroll y carga los productos normales\r\n      this.isSearching = false;\r\n      this.pageNumber = 1; // Restaura el número de página a 1\r\n      this.productos=this.getProductos(null, this.pageNumber);\r\n    }\r\n  }\r\n  async getProductos(busqueda: string = null, pageNumber: number = 1) {\r\n    const headers: any\t\t= new HttpHeaders({'Content-Type' : 'application/octet-stream'});\r\n    \r\n    const options: any = { busqueda, pageNumber };\r\n  \r\n    // Realiza la solicitud HTTP con las opciones\r\n    this.http.post(this.urlRoot + '/index.php/Api/Productos/', JSON.stringify(options), headers)\r\n      .subscribe(\r\n        (res: any) => {\r\n          if (this.isSearching) {\r\n            // Si está buscando, asigna los resultados de la búsqueda\r\n            this.productos = res;\r\n          } else {\r\n            // Si no está buscando, concatena los resultados al arreglo existente\r\n            this.productos = this.productos.concat(res);\r\n          }\r\n          \r\n  \r\n          // ...\r\n        },\r\n        (error: any) => {\r\n          console.log(error);\r\n        }\r\n      );\r\n  } \r\n  abrirModal(idCategoria: number) {\r\n    console.log('se va a abrir pagina con los resultados de busqueda por categoria:', idCategoria);\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  async getCategorias()\r\n  {     \r\n      // eslint-disable-next-line @typescript-eslint/naming-convention\r\n      const headers: any\t\t= new HttpHeaders({'Content-Type' : 'application/octet-stream'});\r\n      const options: any = {};  \r\n\r\n    // Llamar a la API con las opciones\r\n    this.http.post(this.urlRoot+'/index.php/Api/Categorias/',\r\n      JSON.stringify(options), headers)\r\n      .subscribe(\r\n        (res: any) => {\r\n         // Filtrar las categorías cuyo campo 'otros' sea igual a 1 y transformar los nombres a mayúsculas\r\n        this.categoriasOtros = res\r\n        .filter((categoria: any) => categoria.otros == 1)\r\n        .map((categoria: any) => ({\r\n          ...categoria,\r\n          nombreCategoria: categoria.nombreCategoria.toUpperCase(),\r\n          idCategoria: categoria.idCategoria\r\n        }));\r\n        \r\n        this.categorias = res\r\n        .filter((categoria: any) => categoria.otros == 0)\r\n        .map((categoria: any) => ({\r\n          ...categoria,\r\n          nombreCategoria: categoria.nombreCategoria.toUpperCase(),\r\n          idCategoria: categoria.idCategoria\r\n        })); \r\n                 \r\n        },\r\n        (error: any) => {         \r\n          console.log(error);\r\n        }\r\n      );\r\n}\r\nasync modalResultados(idCategoria,nombreCategoria) {\r\n   \r\n  //const user= await this.inicia.getUser();\r\n  //const url_proyecto = user[0].url_proyecto\r\n  const modal = await this.modalCtrl.create({\r\n    component: ResultadosPage,\r\n    breakpoints: [0, 0.99],\r\n    initialBreakpoint: 0.99,\r\n    handle: false,\r\n    componentProps: {\r\n      idCategoria: idCategoria,\r\n      nombreCategoria:nombreCategoria              \r\n    },\r\n    animated: true,\r\n    canDismiss: true,\r\n    keyboardClose: true,\r\n  });\r\n  await modal.present();\r\n}\r\n\r\n}\r\n"],"names":[],"sourceRoot":"webpack:///"}